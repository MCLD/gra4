@model GRA.Controllers.ViewModel.MissionControl.Events.EventsDetailViewModel

<form asp-controller="Events" asp-action="Create" method="post" role="form">

    <input asp-for="UseLocation" type="hidden" />
    <input asp-for="Event.ParentEventId" type="hidden" />

    <div class="row row-spacing">
        <div class="col-xs-12">
            <label asp-for="Event.Name" class="control-label"></label>
            <input asp-for="Event.Name" class="form-control" />
            <span asp-validation-for="Event.Name" class="text-danger"></span>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-8 col-sm-10 row-spacing">
            <label asp-for="Event.StartsAt" class="control-label"></label>
            <div class="input-group date" id="pickerStart">
                <span class="input-group-addon">
                    <span class="fa fa-calendar"></span>
                </span>
                <input asp-for="Event.StartsAt" type="text" class="form-control" />
            </div>
            <span asp-validation-for="Event.StartsAt" class="text-danger"></span>
        </div>
        <div class="col-xs-4 col-sm-2 row-spacing">
            <label asp-for="Event.AllDay" class="control-label center-label" style="text-align:center;"></label>
            <input asp-for="Event.AllDay" class="form-control form-checkbox" />
            <span asp-validation-for="Event.AllDay" class="text-danger"></span>
        </div>
    </div>

    <div class="row row-spacing">
        <div class="col-xs-12">
            <label asp-for="Event.Description" class="control-label"></label>
            <textarea asp-for="Event.Description" class="form-control" rows="5"> </textarea>
            <span asp-validation-for="Event.Description" class="text-danger"></span>
        </div>
    </div>

    <div class="row row-spacing">
        <div class="col-xs-12">
            <label asp-for="Event.ExternalLink" class="control-label"></label>
            <input asp-for="Event.ExternalLink" class="form-control" />
            <span asp-validation-for="Event.ExternalLink" class="text-danger"></span>
        </div>
    </div>

    <div id="branchGroup" class="row row-spacing @(Model.UseLocation ? "hide" : "" )">
        <div class="col-xs-12">
            <label asp-for="Event.AtBranchId" class="control-label"></label>
            <label style="font-size: 12px;">
                <a id="viewLocationList" style="text-decoration:none;cursor:pointer">View Location list</a>
            </label>
            <select asp-for="Event.AtBranchId" asp-items="Model.BranchList" class="form-control">
                <option></option>
            </select>
            <span asp-validation-for="Event.AtBranchId" class="text-danger"></span>
        </div>
    </div>

    <div id="locationGroup" class="row row-spacing @(Model.UseLocation ? "" : "hide" )">
        <div class="col-xs-12">
            <label asp-for="Event.AtLocationId" class="control-label"></label>
            <a id="viewBranchList" style="text-decoration:none;cursor:pointer">View Location list</a>
            <select asp-for="Event.AtLocationId" asp-items="Model.LocationList" class="form-control">
                <option></option>
            </select>
            <span asp-validation-for="Event.AtLocationId" class="text-danger"></span>
        </div>
    </div>

    <div class="row row-spacing">
        <div class="col-xs-12">
            <label asp-for="Event.ProgramId" class="control-label"></label>
            <select asp-for="Event.ProgramId" asp-items="Model.ProgramList" class="form-control">
                <option value="">All Programs</option>
            </select>
            <span asp-validation-for="Event.ProgramId" class="text-danger"></span>
        </div>
    </div>


    <div class="form-group">
        <a asp-action="Index" class="btn btn-default">Return to List</a>
        <button type="submit" class="btn btn-primary">
            <span class="buttonText">Create Event</span>
            <span class="fa fa-spinner fa-pulse fa-lg fa-fw hidden"></span>
        </button>
    </div>
</form>

@section scripts
{
    <script>
        $("#pickerStart").datetimepicker({
            @if (Model.Event != null && Model.Event.AllDay)
            {
                <text>format: "MM/DD/YYYY",</text>
            }
            allowInputToggle: true,
            sideBySide: true,
            useCurrent: false,
            icons: {
                time: "fa fa-clock-o",
                date: "fa fa-calendar",
                up: "fa fa-arrow-up",
                down: "fa fa-arrow-down",
                previous: "fa fa-arrow-left",
                next: "fa fa-arrow-right"
            }
        });

        $("#Event_AllDay").on("change", function() {
            if ($("#Event_AllDay").is(":checked"))
            {
                $('#pickerStart').data("DateTimePicker").format("MM/DD/YYYY")
            }
            else
            {

                $('#pickerStart').data("DateTimePicker").format("MM/DD/YYYY hh:mm A")
            }
        });

        $("#viewLocationList").on("click", function() {
            $("#branchGroup").addClass("hide");
            $("#locationGroup").removeClass("hide");
            $("#UseLocation").val("true");
        });

        $("#viewBranchList").on("click", function() {
            $("#locationGroup").addClass("hide");
            $("#branchGroup").removeClass("hide");
            $("#UseLocation").val("false");
        });
    </script>
}